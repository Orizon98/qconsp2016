!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.yawp=t():n.yawp=t()}(this,function(){return function(n){function t(r){if(e[r])return e[r].exports;var u=e[r]={exports:{},id:r,loaded:!1};return n[r].call(u.exports,u,u.exports,t),u.loaded=!0,u.exports}var e={};return t.m=n,t.c=e,t.p="",t(0)}([function(n,t,e){n.exports=e(1)},function(n,t){n.exports=function(){function n(n){var t={baseUrl:function(n){p=n}};n(t)}function t(){for(var n=arguments[0]||{},t=1,e=arguments.length;e>t;t++){var r=arguments[t];for(var u in r)n[u]=r[u]}return n}function e(n){return Object.keys(n).map(function(t){return encodeURIComponent(t)+"="+encodeURIComponent(n[t])}).join("&")}function r(n,r){var u,o,i,a,c,s,f;f=p+r.url+(r.query?"?"+e(r.query):"");var d={fail:function(n){return u=n,s.onreadystatechange(),d},done:function(n){return o=n,s.onreadystatechange(),d},exception:function(n){return i=n,s.onreadystatechange(),d},then:function(n){return a=n,s.onreadystatechange(),d},error:function(n){return c=n,s.onreadystatechange(),d}};return s=new XMLHttpRequest,s.onreadystatechange=function(){4===s.readyState&&(200===s.status?(o&&o(JSON.parse(s.responseText)),a&&a(JSON.parse(s.responseText))):(u&&u(s),c&&c(t({},s,{responseJSON:JSON.parse(s.responseText)})),i&&i(JSON.parse(s.responseText))))},s.open(n,f,r.async),s.setRequestHeader("Content-type","application/json;charset=UTF-8"),s.send(r.data),d}function u(n){if(n.id)return n.id;throw"use yawp(id) if your endpoint does not have a @Id field called id"}function o(n){function t(n){return 1===arguments.length?l.where=n:l.where=[].slice.call(arguments),this}function u(n){return l.order=n,this}function o(n){return l.sort=n,this}function i(n){return l.limit=n,this}function a(t){return r("GET",n()).done(t)}function c(){Object.keys(l).length>0&&n.addQueryParameter("q",JSON.stringify(l))}function s(t){c();var r=p+n().url+(n().query?"?"+e(n().query):"");return t?decodeURIComponent(r):r}function f(t){return c(),r("GET",n()).done(t)}function d(n){return i(1),f(function(t){var e=0==t.length?null:t[0];n&&n(e)})}function y(n){return f(function(t){if(1!=t.length)throw"called only but got "+t.length+" results";n&&n(t[0])})}var l={};return{where:t,order:u,sort:o,limit:i,fetch:a,list:f,first:d,only:y,url:s}}function i(n){function t(t){return n().data=JSON.stringify(t),r("POST",n())}function e(t){return n().data=JSON.stringify(t),r("PUT",n())}function u(t){return n().data=JSON.stringify(t),r("PATCH",n())}function o(){return r("DELETE",n())}return{create:t,update:e,patch:u,destroy:o}}function a(n){function t(t){return n().url+="/"+t,n()}function e(t){return n.setJson(t),this}function u(t){return n.addQueryParameters(t),this}function o(n){return r("GET",t(n))}function i(n){return r("PUT",t(n))}function a(n){return r("PATCH",t(n))}function c(n){return r("POST",t(n))}function s(n){return r("DELETE",t(n))}return{json:e,params:u,get:o,put:i,_patch:a,post:c,_delete:s}}function c(n){function e(n){return n?n instanceof Object?u(n):n:""}function r(){return d}function c(n){var t=e(n);return r().url=t+r().url,this}function s(n){return r.addQueryParameter("t",n),this}function f(){return d.async=!1,this}var d={url:e(n),async:!0};return r.setJson=function(n){d.data=JSON.stringify(n)},r.addQueryParameters=function(n){d.query=t(d.query,n)},r.addQueryParameter=function(n,t){d.query||(d.query={}),d.query[n]=t},t({from:c,transform:s,sync:f},o(r),i(r),a(r))}function s(n){var t=u(n);return c(t).update(n)}function f(n){var t=u(n);return c(t).patch(n)}function d(n){var t=u(n);return c(t).destroy(n)}var p="/api",y={config:n,update:s,patch:f,destroy:d};return t(c,y)}()}])});
//# sourceMappingURL=yawp.min.js.map